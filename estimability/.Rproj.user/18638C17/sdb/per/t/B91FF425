{
    "contents" : "\\name{epredict}\n\\alias{epredict}\n\\alias{epredict.lm}\n\\alias{epredict.glm}\n\\alias{epredict.mlm}\n\n\\title{\nPredictions with estimability checking\n}\n\\description{\nThese functions call the corresponding S3 \\code{predict} methods in the \\pkg{stats} package, but with a check for estimability of new predictions, and with appropriate actions for non-estimable cases.\n}\n\\usage{\n\\S3method{epredict}{lm}(object, newdata, ..., nonest.tol = 1e-8, nbasis = object$nonest)\n\\S3method{epredict}{glm}(object, newdata, ..., nonest.tol = 1e-8, nbasis = object$nonest)\n\\S3method{epredict}{mlm}(object, newdata, ..., nonest.tol = 1e-8, nbasis = object$nonest)\n}\n\\arguments{\n  \\item{object}{An object ingeriting from \\code{lm}}\n  \\item{newdata}{A \\code{data.frame} containing predictor combinations for new predictions}\n  \\item{\\dots}{Arguments passed to \\code{\\link{predict}}}\n  \\item{nonest.tol}{Tolerance used by \\code{\\link{is.estble}} to check estimability of new predictions}\n  \\item{nbasis}{Basis for the row-null space, e.g., a result of a call to \\code{\\link{nonest.basis}}. If \\code{nbasis} is \\code{NULL}, a basis is constructed from \\code{object}.}\n}\n\\details{\nIf \\code{newdata} is missing or \\code{object} is not rank-deficient, this method passes its arguments directly to the same method in the \\pkg{stats} library. In rank-deficient cases with \\code{newdata} provided, each row of \\code{newdata} is tested for estimability against the null basis provided in \\code{nbasis}. Any non-estimable cases found are replaced with \\code{NA}s.\n\nIf you anticipate making several \\code{epredict} calls with new data, it improves efficiency to either obtain the null basis and provide it in the call, or add it to \\code{object} with the name \\code{\"nonest\"}. See the example below.\n}\n\n\\value{\nThe same as the result of a call to the \\code{predict} method in the \\pkg{stats} package, except rows or elements corresponding to non-estimable predictor combinations are set to \\code{NA}.}\n\n\\author{\nRussell V. Lenth <russell-lenth@uiowa.edu>\n}\n\n\\note{\nThe usual rank-deficiency warning from \\code{stats::predict} is suppressed; but when non-estimable cases are found, a message is displayed explaining that these results were replaced by \\code{NA}. If you wish that message suppressed, use \\samp{options(estimability.quiet = TRUE)}.\n}\n\n\n\\seealso{\n  \\code{\\link[stats]{predict.lm}} in the \\pkg{stats} package;   \n  \\code{\\link{nonest.basis}}.\n}\n\\examples{\nrequire(\"estimability\")\n\n# Fake data where x3 and x4 depend on x1, x2, and intercept\nx1 <- -4:4\nx2 <- c(-2,1,-1,2,0,2,-1,1,-2)\nx3 <- 3*x1 - 2*x2\nx4 <- x2 - x1 + 4\ny <- 1 + x1 + x2 + x3 + x4 + c(-.5,.5,.5,-.5,0,.5,-.5,-.5,.5)\n\n# Different orderings of predictors produce different solutions\nmod1234 <- lm(y ~ x1 + x2 + x3 + x4)\nmod4321 <- lm(y ~ x4 + x3 + x2 + x1)\n \n# test data:\ntestset <- data.frame( \n              x1 = c(3, 6, 6, 0, 0, 1), \n              x2 = c(1, 2, 2, 0, 0, 2), \n              x3 = c(7,14,14, 0, 0, 3), \n              x4 = c(2, 4, 0, 4, 0, 4))\n\n# Look at predictions when we don't check estimability\nsuppressWarnings( # Disable the warning from stats::predict.lm\n    rbind(p1234 = predict(mod1234, newdata = testset),\n          p4321 = predict(mod4321, newdata = testset)))\n\n# Compare with results when we do check:\nrbind(p1234 = epredict(mod1234, newdata = testset),\n      p4321 = epredict(mod4321, newdata = testset))\n\n# Note that estimable cases have the same predictions\n\n# To prevent re-constructing the basis in future calls:\nmod1234$nonest <- nonest.basis(mod1234$qr)\n\n# When row spaces are the same, bases are interchangeable\n# so long as you account for the ordering of parameters:\nepredict(mod4321, newdata = testset, \n    nbasis = mod1234$nonest[c(1,5:2), ])\n\n}\n\n\\keyword{ models }\n\\keyword{ regression }\n",
    "created" : 1422564324802.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4239493308",
    "id" : "B91FF425",
    "lastKnownWriteTime" : 1422566915,
    "path" : "H:/progs/R/devel/ESTIMABILITY/estimability/man/epredict.lm.Rd",
    "project_path" : "man/epredict.lm.Rd",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_doc"
}